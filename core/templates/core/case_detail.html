{% extends "core/base.html" %}

{% block content %}
<style>
    /* Case Detail page background */
    .case-detail-container {
        background: url("https://images.unsplash.com/photo-1581091215369-5d4b5d8f0c4f?auto=format&fit=crop&w=1600&q=80") no-repeat center center fixed;
        background-size: cover;
        min-height: 80vh;
        padding: 40px 20px;
        border-radius: 12px;
    }

    /* Overlay for readability */
    .overlay {
        background: rgba(0, 0, 0, 0.65);
        padding: 20px;
        border-radius: 12px;
        color: white;
    }

    .overlay h2, .overlay h4, .overlay p, .overlay ul, .overlay li, .overlay a {
        color: white !important;
    }

    .overlay a.btn {
        margin-bottom: 15px;
    }

    ul {
        list-style-type: disc;
        padding-left: 20px;
    }
</style>

<div class="case-detail-container">
    <div class="overlay">
        <h2>{{ case.title }}</h2>
        <p><strong>Status:</strong> {{ case.status }}</p>
        <p><strong>Description:</strong> {{ case.description }}</p>
        <p><strong>Created By:</strong> {{ case.created_by.username }}</p>
        <p><strong>Created At:</strong> {{ case.created_at|date:"d M Y, H:i" }}</p>

        <hr>

        <h4>Hearings</h4>
        <a href="{% url 'add_hearing' case.id %}" class="btn btn-primary mb-2">Schedule Hearing</a>
        <ul>
            {% for hearing in case.hearings.all %}
            <li>{{ hearing.hearing_date|date:"d M Y, H:i" }} - Judge: {{ hearing.judge }} - Lawyer: {{ hearing.lawyer }} - Status: {{ hearing.status }}</li>
            {% empty %}
            <li>No hearings scheduled.</li>
            {% endfor %}
        </ul>

        <hr>

        <h4>Documents</h4>
        <a href="{% url 'add_document' case.id %}" class="btn btn-primary mb-2">Add Document</a>
        <ul>
            {% for doc in case.documents.all %}
            <li><a href="{{ doc.file.url }}">{{ doc.file.name }}</a> (Uploaded by {{ doc.uploaded_by.username }})</li>
            {% empty %}
            <li>No documents uploaded.</li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}
